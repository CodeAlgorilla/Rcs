SET(RCS_PHYSICS_SRCS
  ContactsNode.cpp
  ForceDragger.cpp
  PhysicsFactory.cpp
  PhysicsNode.cpp)

IF(USE_BULLET)
  SET(RCS_BULLET_SRCS 
    BulletDistance.cpp
    BulletHelpers.cpp
    BulletHingeJoint.cpp
    BulletDebugDrawer.cpp
    BulletRigidBody.cpp
    BulletSimulation.cpp)
  SET(RCS_PHYSICS_SRCS ${RCS_PHYSICS_SRCS} ${RCS_BULLET_SRCS})
ENDIF(USE_BULLET)

IF(USE_VORTEX)
  SET(VX_SRCS 
    VortexHelpers.cpp
    VortexSimulation.cpp)
  SET_SOURCE_FILES_PROPERTIES(${VX_SRCS} PROPERTIES COMPILE_FLAGS -std=c++11) 
  SET(RCS_PHYSICS_SRCS ${RCS_PHYSICS_SRCS} ${VX_SRCS})
ENDIF(USE_VORTEX)


ADD_LIBRARY(RcsPhysics ${LIBRARY_LINKING_TYPE} ${RCS_PHYSICS_SRCS})
TARGET_INCLUDE_DIRECTORIES(RcsPhysics PUBLIC ${CMAKE_CURRENT_SOURCE_DIR})
TARGET_LINK_LIBRARIES(RcsPhysics RcsCore RcsGraphics)

IF(USE_BULLET)
  TARGET_INCLUDE_DIRECTORIES(RcsPhysics SYSTEM PRIVATE ${BULLET_INCLUDE_DIRS})
  TARGET_LINK_LIBRARIES(RcsPhysics RcsCore RcsGraphics ${BULLET_LIBRARIES})
  TARGET_COMPILE_DEFINITIONS(RcsPhysics PRIVATE ${BULLET_DEFINITIONS})
ENDIF(USE_BULLET)

IF(USE_VORTEX)
  TARGET_INCLUDE_DIRECTORIES(RcsPhysics SYSTEM PRIVATE ${VORTEX_INCLUDE_DIR})
  TARGET_LINK_LIBRARIES(RcsPhysics RcsCore RcsGraphics ${VORTEX_LIBRARIES})
  TARGET_COMPILE_DEFINITIONS(RcsPhysics PRIVATE ${VORTEX_DEFINITIONS})
ENDIF(USE_VORTEX)


IF(USE_BULLET)
  ADD_EXECUTABLE(ExampleBullet ExampleBullet.cpp)
  TARGET_LINK_LIBRARIES(ExampleBullet RcsPhysics)
  TARGET_INCLUDE_DIRECTORIES(ExampleBullet SYSTEM PRIVATE ${BULLET_INCLUDE_DIRS})
  TARGET_COMPILE_DEFINITIONS(RcsPhysics PRIVATE -DUSE_BULLET)
ENDIF(USE_BULLET)

